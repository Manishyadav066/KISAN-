{% extends 'kisan_app/base.html' %}

{% block title %}Farmers List - Kisan Project{% endblock %}

{% block content %}
<h2 style="color: #2c5530; margin-bottom: 30px; font-size: 2.5em; text-align: center;">👨‍🌾 Farmers List</h2>

<!-- Search and Filter Section -->
<div class="card" style="margin-bottom: 30px;">
    <h3 style="color: #2c5530; margin-bottom: 20px;">🔍 Search & Filter</h3>
    <form method="get" style="display: grid; grid-template-columns: 2fr 1fr auto; gap: 15px; align-items: end;">
        <div>
            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">Search Farmers:</label>
            <input type="text" name="search" value="{{ search }}"
                style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;"
                placeholder="Search by name, phone, email, or address...">
        </div>
        <div>
            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">Experience Level:</label>
            <select name="experience" title="Filter farmers by experience level"
                style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                <option value="">All Levels</option>
                <option value="new" {% if experience == 'new' %}selected{% endif %}>New (< 2 years)</option>
                <option value="experienced" {% if experience == 'experienced' %}selected{% endif %}>Experienced (2-10
                    years)</option>
                <option value="expert" {% if experience == 'expert' %}selected{% endif %}>Expert (10+ years)</option>
            </select>
        </div>
        <button type="submit"
            style="background: linear-gradient(135deg, #2c5530 0%, #4a7c59 100%); color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600;">
            🔍 Search
        </button>
    </form>
</div>

{% if farmers %}
<div style="margin-top: 20px;">
    {% for farmer in farmers %}
    <div class="card">
        <div style="display: flex; justify-content: space-between; align-items: start; gap: 20px;">
            <div style="flex: 1;">
                <h4 style="margin-top: 0; color: #2c5530; font-size: 1.4em; margin-bottom: 15px;">
                    👨‍🌾 {{ farmer.name }}
                </h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                    <div>
                        <p style="margin: 5px 0;"><strong style="color: #667eea;">📞 Phone:</strong> {{ farmer.phone }}
                        </p>
                        {% if farmer.email %}
                        <p style="margin: 5px 0;"><strong style="color: #667eea;">📧 Email:</strong> {{ farmer.email }}
                        </p>
                        {% endif %}
                    </div>
                    <div>
                        <p style="margin: 5px 0;"><strong style="color: #667eea;">📍 Address:</strong> {{ farmer.address
                            }}</p>
                        <p style="margin: 5px 0;"><strong style="color: #667eea;">📅 Registered:</strong> {{
                            farmer.created_at|date:"M d, Y" }}</p>
                    </div>
                </div>
            </div>
            <div style="text-align: right;">
                <span
                    style="background: linear-gradient(135deg, #2c5530 0%, #4a7c59 100%); color: white; padding: 8px 16px; border-radius: 20px; font-size: 0.9em;">
                    Active Farmer
                </span>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="empty-state">
    <h3>🌾 No farmers registered yet</h3>
    <p>Start building your farming community by adding farmers to the system through the admin panel.</p>
    <a href="/admin/">Go to Admin Panel</a>
</div>
{% endif %}
{% endblock %}